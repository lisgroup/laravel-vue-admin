(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73aba186"],{2423:function(t,e,r){"use strict";r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"f",(function(){return c})),r.d(e,"b",(function(){return u})),r.d(e,"g",(function(){return s})),r.d(e,"a",(function(){return l}));var a=r("b775");function o(t){return Object(a["a"])({url:"/api/article",method:"get",params:t})}function n(t){return a["a"].post("/api/article",t)}function i(t){return a["a"].get("/api/article/"+t)}function c(t,e){return a["a"].patch("/api/article/"+t,e)}function u(t){return a["a"].delete("/api/article/"+t)}function s(t){return Object(a["a"])({url:"/api/article_search",method:"get",params:t})}function l(t){return Object(a["a"])(t)}},"9c8f":function(t,e,r){"use strict";r("b63c")},b63c:function(t,e,r){},c405:function(t,e,r){"use strict";r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"e",(function(){return c})),r.d(e,"a",(function(){return u})),r.d(e,"f",(function(){return s}));var a=r("b775");function o(t){return Object(a["a"])({url:"/api/category",method:"get",params:t})}function n(t){return a["a"].post("/api/category",t)}function i(t){return a["a"].get("/api/category/"+t)}function c(t,e){return a["a"].patch("/api/category/"+t,e)}function u(t){return a["a"].delete("/api/category/"+t)}function s(t){return Object(a["a"])({url:"/api/category_search",method:"get",params:t})}},fbee:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"栏目",prop:"category_id"}},[r("el-select",{attrs:{placeholder:"请选择栏目","value-key":"name"},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.category,(function(e,a){return r("el-option",{key:a,attrs:{label:e.name,value:e.id}},[r("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.name))])])})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[r("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"作者",prop:"author"}},[r("el-input",{model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"关键词",prop:"keywords"}},[r("el-input",{model:{value:t.form.keywords,callback:function(e){t.$set(t.form,"keywords",e)},expression:"form.keywords"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"标签",prop:"tag_ids"}},[r("el-input",{model:{value:t.form.tag_ids,callback:function(e){t.$set(t.form,"tag_ids",e)},expression:"form.tag_ids"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"内容",prop:"markdown"}},[r("mavon-editor",{ref:"md",on:{imgAdd:t.imgAdd,imgDel:t.imgDel},model:{value:t.form.markdown,callback:function(e){t.$set(t.form,"markdown",e)},expression:"form.markdown"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"是否置顶"}},[r("el-radio-group",{model:{value:t.form.is_top,callback:function(e){t.$set(t.form,"is_top",e)},expression:"form.is_top"}},[r("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),r("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("提交")]),t._v(" "),r("el-button",{on:{click:function(e){return t.resetForm("form")}}},[t._v("重置")])],1)],1)],1)},o=[],n=r("b2d8"),i=(r("64e1"),r("5f87")),c=r("2423"),u=r("c405"),s={components:{mavonEditor:n["mavonEditor"]},data:function(){return{item:"",category:[],form:{title:"",category_id:"",author:"admin",keywords:"",tag_ids:"",markdown:"",content:"0",is_top:0,loading:!1},rules:{title:[{required:!0,message:"请输入名称",trigger:"blur"}],category_id:[{required:!0,message:"请选择栏目",trigger:"blur"}],author:[{required:!0,message:"请输入作者",trigger:"blur"}],keywords:[{required:!0,message:"请输入关键词",trigger:"blur"}],tag_ids:[{required:!0,message:"请选择一个标签",trigger:"blur"}],markdown:[{required:!0,message:"请输入内容",trigger:"blur"}]},redirect:"/article/index"}},watch:{item:function(t){this.form.category_id=t,this.getItem()}},created:function(){this.init(),this.id=this.$route.params.id,this.getData(this.id)},methods:{getItem:function(){this.$emit("getItem",this.form.category)},init:function(){var t=this;Object(u["c"])({perPage:20}).then((function(e){t.category=e.data.data}))},getData:function(t){var e=this;Object(c["c"])(t).then((function(t){e.loading=!1,200===t.code?(e.form=t.data,e.form.item=t.data.category_id,e.form.category_id=t.data.category_id,e.getItem()):e.$message.error(t.reason)}))},onSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.loading=!0,Object(c["f"])(e.id,e.form).then((function(t){e.loading=!1,200===t.code?(e.$message({message:"操作成功",type:"success"}),e.$router.push({path:e.redirect||"/"})):e.$message.error(t.reason)}))}))},onCancel:function(){this.$message({message:"cancel!",type:"warning"})},resetForm:function(t){this.$refs[t].resetFields()},imgAdd:function(t,e){var r=this,a=new FormData;a.append("file",e),Object(c["a"])({url:"https://www.guke1.com/api/upload?token="+Object(i["a"])(),method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){r.$refs.md.$img2Url(t,e.data)}))},imgDel:function(t){}}},l=s,m=(r("9c8f"),r("2877")),f=Object(m["a"])(l,a,o,!1,null,"56344150",null);e["default"]=f.exports}}]);